# 视频大小限制解决方案

## 问题描述
Coze API 对视频文件有 52MB 的大小限制，超过此限制的视频无法进行分析。

## 当前状态
- ✅ **文件上传**: 支持大文件上传到OSS
- ✅ **基本功能**: 文件可以正常上传和存储
- ⚠️ **分析限制**: 超过52MB的文件无法被Coze API分析

## 解决方案

### 方案1：手动压缩（推荐）
使用视频编辑软件手动压缩视频到52MB以下：

#### **推荐工具**
1. **HandBrake** (免费)
   - 下载: https://handbrake.fr/
   - 支持多种格式
   - 可调节质量和大小

2. **FFmpeg** (命令行)
   ```bash
   ffmpeg -i input.mp4 -c:v libx264 -crf 23 -c:a aac -b:a 128k output.mp4
   ```

3. **在线工具**
   - CloudConvert: https://cloudconvert.com/
   - OnlineVideoConverter: https://www.onlinevideoconverter.com/

#### **压缩参数建议**
- **视频编码**: H.264
- **音频编码**: AAC
- **分辨率**: 1280x720 或更低
- **帧率**: 25fps
- **目标大小**: 45-50MB (留一些余量)

### 方案2：文件分割
将长视频分割成多个片段分别分析：

#### **分割方法**
1. **按时间分割**: 每段5-10分钟
2. **按内容分割**: 按演讲主题分割
3. **按大小分割**: 确保每段不超过52MB

#### **分析策略**
- 分别分析每个片段
- 合并分析结果
- 提供整体评估

### 方案3：使用替代服务
寻找支持更大文件的AI分析服务：

#### **可能的替代方案**
1. **本地AI模型**
   - Whisper + 自定义分析
   - 开源语音识别工具

2. **其他云服务**
   - Azure Speech Services
   - Google Cloud Speech-to-Text
   - AWS Transcribe

## 实施建议

### 短期解决方案
1. **用户教育**: 告知用户52MB限制
2. **压缩指导**: 提供压缩工具和参数
3. **文件检查**: 上传前检查文件大小

### 长期解决方案
1. **自动压缩**: 集成可靠的压缩服务
2. **智能分割**: 自动分割大文件
3. **多服务支持**: 支持多种AI分析服务

## 用户操作指南

### 压缩视频步骤
1. **下载工具**: 选择推荐的压缩工具
2. **设置参数**: 使用建议的压缩参数
3. **测试效果**: 确保压缩后质量可接受
4. **重新上传**: 上传压缩后的视频

### 分割视频步骤
1. **选择分割点**: 在自然停顿处分割
2. **保持连贯**: 确保每段内容完整
3. **分别分析**: 逐个上传分析
4. **结果整合**: 合并分析结果

## 技术细节

### 当前限制
- **Coze API**: 52MB 硬限制
- **OSS存储**: 无大小限制
- **本地存储**: 受磁盘空间限制

### 性能考虑
- **上传时间**: 大文件上传较慢
- **存储成本**: OSS按量计费
- **分析质量**: 压缩可能影响质量

## 总结

虽然当前系统无法自动处理超过52MB的视频，但通过以下方式仍可完成分析：

1. **手动压缩**: 最可靠的解决方案
2. **文件分割**: 适合长视频内容
3. **工具指导**: 提供用户友好的指导

### 下一步计划
1. 完善用户指导文档
2. 集成可靠的压缩服务
3. 优化用户体验流程

通过这些解决方案，用户仍然可以充分利用系统的AI分析功能，只是需要一些额外的准备工作。
